import streamlit as st
import time

# 병/증상에 따른 좋은 음식 정보 (description 필드 추가 및 효능 설명 보완)
health_data = {
    "감기": {
        "description": "감기는 주로 바이러스 감염으로 발생하는 상기도(코, 목, 기관지) 감염 질환입니다. 콧물, 코막힘, 기침, 인후통, 미열, 근육통 등의 증상이 나타날 수 있습니다.",
        "음식": "유자차, 배숙, 생강차, 닭죽, 도라지청, 꿀물",
        "효능": "면역력 강화 및 체온 유지에 기여하여 감기 증상 완화에 도움이 됩니다.",
        "icon": "🤧"
    },
    "소화불량": {
        "description": "소화불량은 상복부 불편감, 복통, 더부룩함, 메스꺼움, 트림 등 소화 기능과 관련된 다양한 증상을 포괄합니다. 잘못된 식습관이나 스트레스 등으로 인해 발생할 수 있습니다.",
        "음식": "매실청, 양배추, 무, 보리차, 생강차, 파인애플",
        "효능": "소화 효소 활동을 촉진하고 위장 기능을 개선하며, 위 점막 보호에 효과적입니다.",
        "icon": "🤢"
    },
    "피로": {
        "description": "피로는 일상적인 활동 후 휴식을 취해도 회복되지 않는 신체적, 정신적 기력 저하 상태를 의미합니다. 집중력 저하, 무기력감, 전신 쇠약감 등을 동반할 수 있습니다.",
        "음식": "꿀, 녹차, 아보카도, 버섯, 견과류, 바나나, 시금치",
        "효능": "에너지 공급 및 항산화 작용을 통해 피로 회복을 돕고, 필수 비타민과 미네랄을 보충하여 신체 기능을 활성화합니다.",
        "icon": "😴"
    },
    "두통": {
        "description": "두통은 머리, 얼굴, 목 부위에 발생하는 통증을 총칭합니다. 긴장성 두통, 편두통 등 다양한 원인에 의해 발생하며, 통증의 강도와 양상은 매우 다양하게 나타납니다.",
        "음식": "생강차, 아몬드, 시금치, 연어, 수박",
        "효능": "두통 완화에 유익한 성분을 포함하며, 탈수 현상 예방 및 염증 반응 조절에 도움을 줍니다.",
        "icon": "🤕"
    },
    "변비": {
        "description": "변비는 배변 횟수가 적거나 배변 시 과도한 힘이 필요하고 잔변감이 남는 상태를 말합니다. 식이섬유 섭취 부족, 불규칙한 생활 습관, 스트레스 등이 원인이 될 수 있습니다.",
        "음식": "푸룬, 사과, 다시마, 고구마, 통곡물, 물",
        "효능": "식이섬유가 풍부하여 장운동 활성화 및 변비 해소에 기여합니다. 충분한 수분 섭취가 중요합니다.",
        "icon": "🚽"
    },
    "불면증": {
        "description": "불면증은 잠들기 어렵거나, 잠든 후 자주 깨거나, 너무 일찍 깨어 더 이상 잠을 이룰 수 없는 수면 장애를 말합니다. 만성 피로와 주간 활동에 지장을 초래할 수 있습니다.",
        "음식": "체리, 바나나, 따뜻한 우유, 상추, 아몬드, 캐모마일 차",
        "효능": "수면 유도 호르몬 생성을 돕고 신경계를 안정시켜 숙면 환경 조성에 유리합니다.",
        "icon": "💤"
    },
    "스트레스": {
        "description": "스트레스는 환경적, 심리적 압박에 대한 신체적, 정신적 반응입니다. 과도한 스트레스는 불안, 우울, 신체적 증상 등으로 이어질 수 있습니다.",
        "음식": "다크 초콜릿, 견과류, 아보카도, 베리류, 녹차, 연어",
        "효능": "스트레스 호르몬 조절 및 심신 안정에 기여하는 성분들을 포함하며, 뇌 기능 활성화에도 도움을 줍니다.",
        "icon": "😩"
    },
    "뼈 건강": {
        "description": "뼈 건강은 골밀도 유지 및 뼈의 강도를 포함하는 개념입니다. 뼈는 신체를 지지하고 내부 장기를 보호하며, 칼슘 등 미네랄 저장고 역할을 합니다.",
        "음식": "우유, 치즈, 멸치, 브로콜리, 두부, 케일",
        "효능": "뼈 밀도 유지 및 강화에 필수적인 칼슘과 비타민 D, K 등을 공급하며, 골다공증 예방에 기여합니다.",
        "icon": "🦴"
    },
    "선택해주세요": {
        "description": "",
        "음식": "증상을 선택하여 정보를 확인하십시오.",
        "효능": "",
        "icon": ""
    }
}

st.set_page_config(
    page_title="내 몸 건강 식탁",
    page_icon="❤️",
    layout="centered"
)

st.title("내 몸 건강 식탁")
st.write("본 애플리케이션은 증상별 건강 음식 정보를 제공합니다. 목록에서 해당 증상을 선택하여 주십시오.")

st.markdown("---")

# 증상 선택 드롭다운 메뉴
symptom = st.selectbox(
    "증상을 선택하십시오:",
    tuple(health_data.keys()) # health_data 딕셔너리의 키를 이용하여 동적으로 목록 생성
)

# 선택된 증상에 따라 정보 보여주기
if symptom != "선택해주세요":
    with st.spinner('정보를 불러오는 중입니다...'):
        time.sleep(0.8)

    current_info = health_data[symptom]
    current_icon = current_info["icon"]

    st.header(f"{current_icon} {symptom} 관련 정보 {current_icon}")
    
    # 🌟 새로운 추가 정보: 질병/증상에 대한 간략한 설명
    if current_info["description"]:
        st.markdown(f"**▪ 증상 개요**: {current_info['description']}")
    
    st.subheader(f"권장 음식: {current_info['음식']}") # food_info 대신 current_info 사용
    st.markdown(f"**주요 효능**: {current_info['효능']}") # food_info 대신 current_info 사용
    
    with st.expander("세부 효능 (과학적 근거)"):
        if symptom == "감기":
            st.write("유자의 비타민 C는 면역력 강화에 필수적이며, 생강의 진저롤 및 쇼가올 성분은 항염증 및 온열 효과로 감기 증상 완화에 기여합니다. 닭고기는 단백질과 아미노산을 제공하여 체력 회복을 돕습니다.")
        elif symptom == "소화불량":
            st.write("매실의 유기산은 소화 효소 분비를 촉진하고 장 기능을 활성화합니다. 양배추와 무는 소화를 돕는 효소와 비타민 U를 함유하여 위 점막 보호 및 소화 기능 개선에 효과적입니다.")
        elif symptom == "피로":
            st.write("바나나의 탄수화물은 빠른 에너지 공급원이며, 마그네슘과 칼륨은 근육 기능 유지와 피로 해소에 도움을 줍니다. 녹차의 테아닌은 심신 안정 효과를, 비타민 B군이 풍부한 버섯은 에너지 대사를 돕습니다.")
        elif symptom == "두통":
            st.write("생강은 염증 반응을 억제하여 두통 완화에 도움을 줄 수 있습니다. 아몬드와 시금치의 마그네슘은 신경 안정 및 혈관 이완을 통해 편두통 예방에 기여하며, 수박은 수분 보충으로 탈수성 두통에 유익합니다.")
        elif symptom == "변비":
            st.write("푸룬과 통곡물, 고구마, 사과 등은 풍부한 식이섬유를 함유하여 장운동을 촉진하고 변의 부피를 늘려 원활한 배변 활동을 돕습니다. 충분한 물 섭취는 섬유질의 효과를 극대화합니다.")
        elif symptom == "불면증":
            st.write("체리와 바나나에 함유된 멜라토닌과 트립토판은 수면 유도 호르몬의 분비를 돕습니다. 따뜻한 우유의 칼슘과 트립토판, 캐모마일 차의 아피게닌은 신경계를 안정시켜 숙면에 유리한 환경을 조성합니다.")
        elif symptom == "스트레스":
            st.write("다크 초콜릿의 플라보노이드는 항산화 작용과 기분 개선에 기여하며, 견과류와 연어의 오메가-3 지방산은 뇌 기능 활성화 및 스트레스 호르몬 조절에 도움을 줍니다. 베리류의 항산화 성분도 스트레스 반응 완화에 유익합니다.")
        elif symptom == "뼈 건강":
            st.write("우유, 치즈 등 유제품과 멸치는 칼슘의 주요 공급원이며, 브로콜리와 케일은 비타민 K를 다량 함유하여 칼슘의 뼈 흡수를 돕고 뼈 단백질 형성에 기여합니다. 비타민 D는 칼슘 흡수에 필수적입니다.")
        else:
            st.write("해당 증상에 대한 과학적 근거는 현재 준비 중입니다.")


    st.info("⚠️ 본 정보는 일반적인 건강 정보를 제공하며, 의료 전문가의 진단 및 치료를 대체할 수 없습니다. 증상이 지속되거나 악화될 경우 반드시 의료 전문가와 상담하시기 바랍니다.")

else:
    st.write("상단의 드롭다운 메뉴에서 증상을 선택하여 관련 정보를 확인하십시오.")

st.markdown("---")
st.write("내 몸 건강 식탁 애플리케이션")
