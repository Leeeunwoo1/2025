import streamlit as st
import time

# 병/증상에 따른 좋은 음식 정보 (변비 아이콘을 🚽로 변경!)
health_data = {
    "감기": {
        "음식": "유자차, 배숙, 생강차, 닭죽, 도라지청, 꿀물",
        "효능": "면역력 강화 및 체온 유지에 기여하여 감기 증상 완화에 도움이 됩니다.",
        "icon": "🤧"
    },
    "소화불량": {
        "음식": "매실청, 양배추, 무, 보리차, 생강차, 파인애플",
        "효능": "소화 효소 활동을 촉진하고 위장 기능을 개선하는 데 효과적입니다.",
        "icon": "🤢"
    },
    "피로": {
        "음식": "꿀, 녹차, 아보카도, 버섯, 견과류, 바나나, 시금치",
        "효능": "에너지 공급 및 항산화 작용을 통해 피로 회복을 돕고 필수 비타민과 미네랄을 보충합니다.",
        "icon": "😴"
    },
    "두통": {
        "음식": "생강차, 아몬드, 시금치, 연어, 수박",
        "효능": "두통 완화에 유익한 성분을 포함하며, 탈수 현상 예방에도 도움을 줍니다.",
        "icon": "🤕"
    },
    "변비": {
        "음식": "푸룬, 사과, 다시마, 고구마, 통곡물, 물",
        "효능": "식이섬유가 풍부하여 장운동 활성화 및 변비 해소에 기여합니다. 충분한 수분 섭취가 중요합니다.",
        "icon": "🚽" # 🍎(사과) 아이콘 대신 🚽(변기) 아이콘으로 변경되었습니다!
    },
    "불면증": {
        "음식": "체리, 바나나, 따뜻한 우유, 상추, 아몬드, 캐모마일 차",
        "효능": "수면 유도 호르몬 생성을 돕고 신경계를 안정시켜 숙면 환경 조성에 유리합니다.",
        "icon": "💤"
    },
    "스트레스": {
        "음식": "다크 초콜릿, 견과류, 아보카도, 베리류, 녹차, 연어",
        "효능": "스트레스 호르몬 조절 및 심신 안정에 기여하는 성분들을 포함합니다.",
        "icon": "😩"
    },
    "뼈 건강": {
        "음식": "우유, 치즈, 멸치, 브로콜리, 두부, 케일",
        "효능": "뼈 밀도 유지 및 강화에 필수적인 칼슘과 비타민 D, K 등을 공급합니다.",
        "icon": "🦴"
    },
    "선택해주세요": {
        "음식": "증상을 선택하여 정보를 확인하십시오.",
        "효능": "",
        "icon": ""
    }
}

st.set_page_config(
    page_title="내 몸 건강 식탁",
    page_icon="❤️",
    layout="centered"
)

st.title("내 몸 건강 식탁")
st.write("본 애플리케이션은 증상별 건강 음식 정보를 제공합니다. 목록에서 해당 증상을 선택하여 주십시오.")

st.markdown("---")

# 증상 선택 드롭다운 메뉴
symptom = st.selectbox(
    "증상을 선택하십시오:",
    ("선택해주세요", "감기", "소화불량", "피로", "두통", "변비", "불면증", "스트레스", "뼈 건강")
)

# 선택된 증상에 따라 정보 보여주기
if symptom != "선택해주세요":
    with st.spinner('정보를 불러오는 중입니다...'):
        time.sleep(0.8)

    current_icon = health_data[symptom]["icon"]

    st.header(f"{current_icon} {symptom} 관련 정보 {current_icon}")
    
    food_info = health_data.get(symptom, {"음식": "정보를 찾을 수 없습니다.", "효능": ""})
    
    st.subheader(f"권장 음식: {food_info['음식']}")
    st.markdown(f"**주요 효능**: {food_info['효능']}")
    
    with st.expander("세부 효능 (과학적 근거)"):
        if symptom == "감기":
            st.write("유자의 비타민 C와 생강의 진저롤 및 쇼가올은 면역력 증진 및 염증 반응 억제에 기여합니다.")
        elif symptom == "소화불량":
            st.write("매실의 유기산은 소화 효소 분비를 촉진하며, 양배추는 위 점막 보호, 무의 디아스타아제는 탄수화물 소화를 돕습니다.")
        elif symptom == "피로":
            st.write("바나나의 탄수화물, 마그네슘, 칼륨은 에너지 공급 및 피로 해소에 유용합니다. 녹차의 테아닌은 집중력 향상과 스트레스 완화에 기여할 수 있습니다.")
        elif symptom == "두통":
            st.write("생강은 항염증 작용으로 두통 완화에 도움을 줄 수 있으며, 아몬드와 시금치의 마그네슘은 편두통 예방에 기여하는 것으로 알려져 있습니다.")
        elif symptom == "변비":
            st.write("푸룬과 통곡물의 식이섬유는 장 운동을 촉진하며, 충분한 수분 섭취는 섬유질 효과를 높여 배변 활동을 지원합니다.")
        elif symptom == "불면증":
            st.write("체리와 바나나의 멜라토닌 및 트립토판은 수면 유도 호르몬 생성에 도움을 주며, 캐모마일 차는 신경 안정 효과를 통해 숙면에 기여합니다.")
        elif symptom == "스트레스":
            st.write("다크 초콜릿의 플라보노이드, 견과류의 마그네슘, 연어의 오메가-3 등은 스트레스 호르몬 조절 및 심신 안정에 도움을 줄 수 있습니다.")
        elif symptom == "뼈 건강":
            st.write("칼슘은 뼈의 주요 구성 성분이며, 비타민 D는 칼슘 흡수를 촉진합니다. 비타민 K는 뼈 단백질 형성을 도와 뼈 밀도 유지에 필수적입니다.")
        else:
            st.write("해당 증상에 대한 과학적 근거는 현재 준비 중입니다.")


    st.info("⚠️ 본 정보는 일반적인 건강 정보를 제공하며, 의료 전문가의 진단 및 치료를 대체할 수 없습니다. 증상이 지속되거나 악화될 경우 반드시 의료 전문가와 상담하시기 바랍니다.")

else:
    st.write("상단의 드롭다운 메뉴에서 증상을 선택하여 관련 정보를 확인하십시오.")

st.markdown("---")
st.write("내 몸 건강 식탁 애플리케이션")
